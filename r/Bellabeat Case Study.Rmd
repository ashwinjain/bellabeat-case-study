---
title: "Bellabeat Case Study"
author: "Ashwin Jain"
date: "8/18/2023"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Installing Packages

For this, I've installed these packages

'readxl', 'Rcpp', 'magrittr', 'dplyr'



```{r install}
library(readxl)
library(Rcpp)
library(magrittr)
library(dplyr)
```

# Importing Data

We first need to load in our data. It was downloaded as csv files which I then exported to Excel for visual purposes

```{r import}
dailyActivity_merged = read_excel("/Users/ashwinjain/Development/Personal/bellabeat-case-study/data/dailyActivity_merged.xlsx")
sleepDay_merged = read_excel("/Users/ashwinjain/Development/Personal/bellabeat-case-study/data/sleepDay_merged.xlsx")
```

# Cleaning Data

## dailyActivity_merged

We will first work with the dailyActivity_merged dataset

```{r view dailyActivity_merged, echo=FALSE}

knitr::kable(dailyActivity_merged[1:5, ], caption="Preview of dailyActivities_merged")

col_before = colnames(dailyActivity_merged)
```

First, check the sample size

Second, I deleted the SedentaryActiveDistance column - many of these entries had values over 0, which doesn't make sense because being sedentary and on the move are mutually exclusive


Second, I decided we should check for duplicated data and remove extras

```{r dup-dailyAvtivity}
sum(duplicated(dailyActivity_merged) == TRUE)
```

The duplicated function outputs a list where the value of each indice in the list corresponds to whether that row is unique or not. The sum of all the TRUE values is 0, therefore, there are no duplicates 


Third, we should remove irrelevant data. There are few things to consider here. First, the SedentaryActiveDistance column - this does not matter as sedentary distance will always be zero.

A few of the data points have sedentary distances greater than zero, which is an error.


```{r distance>0 d}
sum(dailyActivity_merged$SedentaryActiveDistance > 0)
```

As we can see, there are 82 days amoungst these individuals where the technology logged distance traveled while the person was moving, so it should be removed


```{r delete SedentaryActiveDistance}
dailyActivity_merged <- select(dailyActivity_merged, -SedentaryActiveDistance)
```


List of columns before - 15 total
```{r before, echo=FALSE}
col_before
```

List of columns after - 14 total
```{r after, echo=FALSE}
colnames(dailyActivity_merged)
```


Furthermore, there are many days where users logged 0 for all columns. This is likely because the user forgot to wear their technology. We are going to remove this from the table. However, we will store the data in a separate table, as it may prove useful later.

I am checking for calories burned to be less than 1000. Barring medical conditions, it is near impossible to have a metabolic rate less than 1000 calories

```{r notworn}
not_worn = subset(dailyActivity_merged, Calories < 1000)
dailyActivity_merged <- subset(dailyActivity_merged, Calories > 1000)
dailyActivity_merged
```


Rename columns

Merge daily sleep and daily activity